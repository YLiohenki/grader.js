/*! Grader v0.0.1 */
!function t(e,i,s){function n(r,a){if(!i[r]){if(!e[r]){var h="function"==typeof require&&require;if(!a&&h)return h(r,!0);if(o)return o(r,!0);var u=new Error("Cannot find module '"+r+"'");throw u.code="MODULE_NOT_FOUND",u}var l=i[r]={exports:{}};e[r][0].call(l.exports,function(t){var i=e[r][1][t];return n(i?i:t)},l,l.exports,t,e,i,s)}return i[r].exports}for(var o="function"==typeof require&&require,r=0;r<s.length;r++)n(s[r]);return n}({1:[function(t,e,i){"use strict";function s(t){this.element=document.querySelector(t.element),this.backgroundImage=t.backgroundImage,this.gradientType=t.gradientType||"linear",this.gradientOrigin=t.gradientOrigin||"circle closest-side",this.activeState=null,this.defaultState="default-state",this.states=t.states,this.stateTransitionSpeed=t.stateTransitionSpeed||2e3,this.animationStep=t.animationStep,this.opacity=t.opacity,this.isPausedWhenNotInView=t.isPausedWhenNotInView!==!1,this.pauseWhenTabIsntActive=t.pauseWhenTabIsntActive||!1,this.applyToText=!!t.applyToText,this.name=t.name,this.emitEvents=!!t.emitEvents,this.paused=!1,this.refreshIntervalId=null,this.stopedAtTimeStamp=null,this.gradients=null,this.speed=null,this.step=0,this.eventPolyfill(),this.events=this.emitEvents?this.getEvents():null,this.callbacks={onStart:"function"==typeof t.onStart&&t.onStart,onGradientChange:"function"==typeof t.onGradientChange&&t.onGradientChange,onEnd:"function"==typeof t.onEnd&&t.onEnd},this.changeState(this.defaultState),this.previousStepTimeStamp=Date.now(),this.resume(),0!=this.isPausedWhenNotInView&&this.pauseWhenNotInView(),this.pauseWhenTabIsntActive&&this.pauseWhenTabIsntActive()}s.prototype.updateGradient=t("./updateGradient.js"),s.prototype.changeState=t("./changeState.js"),s.prototype.resume=t("./resume.js"),s.prototype.pause=t("./pause.js"),s.prototype.getOpacity=t("./getOpacity.js"),s.prototype.getLightness=t("./getLightness.js"),s.prototype.pauseWhenNotInView=t("./pauseWhenNotInView.js"),s.prototype.pauseWhenTabIsntActive=t("./pauseWhenTabIsntActive.js"),s.prototype.eventPolyfill=t("./eventPolyfill.js"),s.prototype.getEvents=t("./getEvents.js"),e.exports=s},{"./changeState.js":2,"./eventPolyfill.js":3,"./getEvents.js":4,"./getLightness.js":5,"./getOpacity.js":6,"./pause.js":7,"./pauseWhenNotInView.js":8,"./pauseWhenTabIsntActive.js":9,"./resume.js":10,"./updateGradient.js":11}],2:[function(t,e,i){"use strict";e.exports=function(t){if(this.activeState!==t||this.isChangingState){var e=!this.activeState;if(this.workingState=this.states[t],this.gradients=this.workingState.gradients.map(function(t){var e=0;return t.map(function(t){var i,s={};return i="string"==typeof t?parseInt(t.substring(1),16):parseInt(t.color.substring(1),16),s.red=i>>16&255,s.green=i>>8&255,s.blue=255&i,s.size=t.size||0==t.size?t.size:e,s.opacity=t.opacity,++e,s})}),this.paused||this.pause(),e)return this.activeState=t,this.previousStepTimeStamp=Date.now(),this.speed=this.workingState.transitionSpeed||this.stateTransitionSpeed,void(this.isChangingState=!1);this.changeStateIntervalId&&(clearInterval(this.changeStateIntervalId),this.changeStateIntervalId=null),this.isChangingState=!0,this.step=0,this.previousStepTimeStamp=Date.now(),this.oldStateGradient=[this.firstColor,this.secondColor],this.changeStateIntervalId=setInterval(this.updateGradient.bind(this),this.animationStep||200),this.changeStateTimeout&&(clearTimeout(this.changeStateTimeout),this.changeStateTimeout=null),this.changeStateTimeout=setTimeout(function(){this.activeState=t,this.isChangingState=!1,this.changeStateIntervalId&&clearInterval(this.changeStateIntervalId),this.changeStateIntervalId=null,this.changeStateTimeout=null,this.previousStepTimeStamp=Date.now(),this.stopedAtTimeStamp=Date.now(),this.step=0,this.speed=this.workingState.transitionSpeed||this.stateTransitionSpeed,this.resume()}.bind(this),this.stateTransitionSpeed+this.animationStep)}}},{}],3:[function(t,e,i){"use strict";e.exports=function(){function t(t,e){e=e||{bubbles:!1,cancelable:!1,detail:void 0};var i=document.createEvent("CustomEvent");return i.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),i}"function"!=typeof window.CustomEvent&&(t.prototype=window.Event.prototype,window.CustomEvent=t)}},{}],4:[function(t,e,i){"use strict";e.exports=function(){return{start:new CustomEvent("grader:"+this.name+":start"),end:new CustomEvent("grader:"+this.name+":end"),pause:new CustomEvent("grader:"+this.name+":pause"),resume:new CustomEvent("grader:"+this.name+":resume"),lightnessChange:function(t){return new CustomEvent("grader:"+this.name+":lightnessChange",{detail:{state:t.state},bubbles:!1,cancelable:!1})}.bind(this),gradientChange:function(t){return new CustomEvent("grader:"+this.name+":gradientChange",{detail:{isLooping:t.isLooping,colorsFrom:t.colorsFrom,colorsTo:t.colorsTo,activeState:t.activeState},bubbles:!1,cancelable:!1})}.bind(this)}}},{}],5:[function(t,e,i){"use strict";e.exports=function(){var t,e=[this.firstColor,this.secondColor],i=[],s=null;e.forEach(function(t,e,s){i.push(Math.max(t.red,t.green,t.blue))}),i.forEach(function(e,n,o){s=null===s?e:s+e,n===i.length-1&&(t=Math.round(s/(n+1)))});var n=t>=128?"light":"dark";return this.lightness&&this.lightness!=n&&this.events&&document.dispatchEvent(this.events.lightnessChange({state:n})),this.lightness=n,this.lightness}},{}],6:[function(t,e,i){"use strict";e.exports=function(t,e){var i=t.opacity;return i||0==i?i:(i="object"==typeof this.workingState.opacity?this.workingState.opacity[e?0:1]:null,i||0==i?i:(i=this.workingState.opacity,i||0==i?i:(i="object"==typeof this.opacity?this.opacity[e?0:1]:null,i||0==i?i:(i=this.opacity,i||0==i?i:i=1))))}},{}],7:[function(t,e,i){"use strict";e.exports=function(){this.paused||(this.paused=!0,this.stopedAtTimeStamp=Date.now(),clearInterval(this.refreshIntervalId),this.refreshIntervalId=null,this.events&&document.dispatchEvent(this.events.pause))}},{}],8:[function(t,e,i){"use strict";e.exports=function(){var t,e=function(e){t&&clearTimeout(t),t=setTimeout(function(){var t=this.element.getBoundingClientRect(),i=t.bottom<0||t.right<0||t.left>window.innerWidth||t.top>window.innerHeight;i?this.isPaused||this.isPausedBecauseNotInView||(this.isPausedBecauseNotInView=!0,this.pause("isPausedBecauseNotInView")):this.isPaused&&e!==!0||(this.isPausedBecauseNotInView=!1,this.resume("isPausedBecauseNotInView"))}.bind(this),300)}.bind(this);window.addEventListener("scroll",e),e(!0)}},{}],9:[function(t,e,i){"use strict";e.exports=function(){var t;window.addEventListener("focus",function(e){console.log("focus"),t&&clearTimeout(t),t=setTimeout(function(){this.resume()}.bind(this),300)},!1),window.addEventListener("blur",function(t){console.log("blur"),this.pause()}.bind(this),!1)}},{}],10:[function(t,e,i){"use strict";e.exports=function(){this.paused&&(this.paused=!1,this.stopedAtTimeStamp&&(this.previousStepTimeStamp=Date.now()-(this.stopedAtTimeStamp-this.previousStepTimeStamp),this.stopedAtTimeStamp=null),this.refreshIntervalId=setInterval(this.updateGradient.bind(this),this.animationStep||200),this.events&&document.dispatchEvent(this.events.resume))}},{}],11:[function(t,e,i){"use strict";e.exports=function(){var t=Date.now();if(!this.isChangingState&&t-this.previousStepTimeStamp>=this.speed&&(this.step+=1,this.previousStepTimeStamp=t,this.step>=this.gradients.length-1&&!this.workingState.loop))return void clearInterval(this.refreshIntervalId);var e=(t-this.previousStepTimeStamp)/(this.isChangingState?this.stateTransitionSpeed:this.speed);this.step>=this.gradients.length&&(this.step=0);var i=this.isChangingState?this.oldStateGradient:this.gradients[this.step],s=this.isChangingState?this.gradients[0]:this.gradients[this.step+1<this.gradients.length?this.step+1:0];this.oldFirstColor=this.firstColor,this.firstColor={},this.firstColor.red=i[0].red*(1-e)+s[0].red*e,this.firstColor.green=i[0].green*(1-e)+s[0].green*e,this.firstColor.blue=i[0].blue*(1-e)+s[0].blue*e,this.firstColor.size=i[0].size*(1-e)+s[0].size*e,this.firstColor.opacity=this.getOpacity(i[0],!0)*(1-e)+this.getOpacity(s[0],!0)*e,this.oldSecondColor=this.secondColor,this.secondColor={};var n=s[1]?s[1]:s[0],o=i[1]?i[1]:i[0];this.secondColor.red=o.red*(1-e)+n.red*e,this.secondColor.green=o.green*(1-e)+n.green*e,this.secondColor.blue=o.blue*(1-e)+n.blue*e,this.secondColor.size=o.size*(1-e)+n.size*e,this.secondColor.opacity=this.getOpacity(o,!1)*(1-e)+this.getOpacity(n,!1)*e,window.debugging&&(console.log("time:"+Date()),console.log("step:"+this.step+" substep:"+e),console.log("color1: "+this.firstColor.red+" "+this.firstColor.green+" "+this.firstColor.blue+" "+this.firstColor.size+" "+this.firstColor.opacity),console.log("color2: "+this.secondColor.red+" "+this.secondColor.green+" "+this.secondColor.blue+" "+this.secondColor.size+" "+this.secondColor.opacity),console.log(""));var r=this.backgroundImage?this.backgroundImage+", ":" ",a=("radial"==this.gradientType.toLowerCase()?"radial":"linear")+"-gradient("+this.gradientOrigin+", rgba("+Math.round(this.firstColor.red)+", "+Math.round(this.firstColor.green)+", "+Math.round(this.firstColor.blue)+", "+this.firstColor.opacity+") "+Math.round(100*this.firstColor.size)+"%, rgba("+Math.round(this.secondColor.red)+", "+Math.round(this.secondColor.green)+", "+Math.round(this.secondColor.blue)+", "+this.secondColor.opacity+") "+Math.round(100*this.secondColor.size)+"%)";this.element.setAttribute("style","background:"+r+"rgba("+Math.round((this.firstColor.red+this.secondColor.red)/2)+", "+Math.round((this.firstColor.green+this.secondColor.green)/2)+", "+Math.round((this.firstColor.blue+this.secondColor.blue)/2)+", "+(this.firstColor.opacity+this.secondColor.opacity)/2+"); background:"+r+"-webkit-"+a+"; background:"+r+"-o-"+a+"; background:"+r+"-moz-"+a+"; background:"+r+"-ms-"+a+"; background:"+r+a+(this.workingState.applyToText||0!=this.workingState.applyToText&&this.applyToText?";-webkit-background-clip: text;-webkit-text-fill-color: transparent;":"")),this.element.classList.remove("grader-dark"),this.element.classList.remove("grader-light"),this.element.classList.add("grader-"+this.getLightness()),this.events&&document.dispatchEvent(this.events.gradientChange({isLooping:this.workingState.loop,colorsFrom:[this.oldFirstColor,this.oldSecondColor],colorsTo:[this.firstColor,this.secondColor],activeState:this.workingState}))}},{}],12:[function(t,e,i){window.Grader=t("./lib/Grader.js")},{"./lib/Grader.js":1}]},{},[12]);